{% extends "base.html" %}
{% load static %}

{% block title %}Reminders{% endblock title %}

{% block body %}

{% include "header.html" %}

<main>

    <!-- Form -->
    <form id="add_new_form" method="POST" hx-disabled-elt="#sbt_btn" hx-post="{% url "add_reminder" %}" hx-swap="none" class="flex flex-col sm:flex-row items-center justify-center mt-10 sm:space-x-2 space-y-3 sm:space-y-0 *:w-full sm:[&>*:not(:first-child)]:w-fit px-3" _="on htmx:afterRequest reset() me">
        {% csrf_token %}
        <input name="text" type="text" placeholder="Add a reminder" class="input input-bordered sm:w-96" required _="on input if my value is empty add @disabled to #sbt_btn else remove @disabled from #sbt_btn"/>
        <input name="dateTime" type="datetime-local" value="2011-09-29 12:00" id="dateTimePicker" class="input input-bordered"/>
        <button id="sbt_btn" type="submit" class="btn" disabled>
            <span class="sbt-text">Add</span>
        </button>
    </form>

    <!-- reminders -->
    <div id="reminders-con" hx-get="{% url "reminder_refresh" %}" hx-trigger="fire from:body" class="flex flex-col mx-auto space-y-3 mt-20 px-3 max-w-[800px] divide-y *:space-x-4">
        {% include "partials/reminder.html" %}
    </div>
    
</main>

<script async src="{% static "./src/js/htmx.min.js" %}"></script> 
<script defer src="{% static "./src/js/dateTime.js" %}"></script>
<script async src="{% static "./src/js/generalUseCase.js" %}"></script>
<script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
<!-- auto animation formkit library -->
<script type="module">
    import autoAnimate from '{% static "./src/js/auto-animate-formkit.js" %}'
    document.addEventListener('DOMContentLoaded', () => {
        autoAnimate(document.getElementById('reminders-con'))
    })
</script>

{% endblock body %}